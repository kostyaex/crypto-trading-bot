### USER
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ go –æ–ø–µ—Ä–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ä—è–¥–∞–º–∏ —Å–æ—Å—Ç–æ—è—â–∏–º–∏ –∏–∑ —Ç–æ—á–µ–∫, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ –≤–µ—Å —Ç–∏–ø–∞ float64. –í –∫–∞–∂–¥–æ–º –≤—Ä–µ–º–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ—á–µ–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏.

–°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—á–∫–∏ –≤ **—Å–µ—Ä–∏–∏**, –≥–¥–µ –∫–∞–∂–¥–∞—è —Å–µ—Ä–∏—è ‚Äî —ç—Ç–æ –Ω–∞–±–æ—Ä —Ç–æ—á–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ:
- –∏–º–µ—é—Ç **–ø–æ—Ö–æ–∂–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è**
- –∏–¥—É—Ç **–¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º –∏–ª–∏ –±–ª–∏–∑–∫–æ –≤–æ –≤—Ä–µ–º–µ–Ω–∏**
- –±–ª–∏–∑–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–µ—Å–æ–≤ —Ç–æ—á–µ–∫
- –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –¥–∏–Ω–∞–º–∏–∫—É**

–°–µ—Ä–∏–∏ –º–æ–≥—É—Ç –∏–¥—Ç–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤–æ –≤—Ä–µ–º–µ–Ω–∏.
–ù–∞–±–æ—Ä —Ç–æ—á–µ–∫ –ø–æ –æ—á–µ—Ä–µ–¥–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –∏–Ω—Ç–µ—Ä–≤–∞–ª—É –ø–æ—Å—Ç—É–ø–∞–µ—Ç —Å –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–µ–π.



### ASSISTANT
–î–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–æ—á–µ–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ –≤ **—Å–µ—Ä–∏–∏**, –≥–¥–µ —Ç–æ—á–∫–∏:
- –∏–º–µ—é—Ç **–ø–æ—Ö–æ–∂–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è**,
- –Ω–∞—Ö–æ–¥—è—Ç—Å—è **–±–ª–∏–∑–∫–æ –≤–æ –≤—Ä–µ–º–µ–Ω–∏**,
- –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—É—é –¥–∏–Ω–∞–º–∏–∫—É**,

–º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–¥—Ö–æ–¥, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ **–∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é –≤–æ –≤—Ä–µ–º–µ–Ω–∏ —Å —É—á–µ—Ç–æ–º –≤–µ—Å–∞**. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ—à–µ–Ω–∏—è –Ω–∞ —è–∑—ã–∫–µ Go.

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

```go
type Point struct {
    Value float64
    Weight float64
    Time time.Time
}

type Series struct {
    Points []Point
}
```

---

## üéØ –¶–µ–ª—å

–ù–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–æ—á–µ–∫ –∑–∞ –Ω–æ–≤—ã–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª) –Ω—É–∂–Ω–æ:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥—É—é –Ω–æ–≤—É—é —Ç–æ—á–∫—É –Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å–µ—Ä–∏—è–º.
2. –ï—Å–ª–∏ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∏ –∫ –æ–¥–Ω–æ–π ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Ä–∏—é.
3. –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–∏–π.

---

## üìè –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

### 1. –ü–æ—Ö–æ–∂–µ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π
–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–µ –∏–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ:

```go
deltaValue := math.Abs(newPoint.Value - existingPoint.Value)
if deltaValue < thresholdValue {
   // –∑–Ω–∞—á–µ–Ω–∏—è –±–ª–∏–∑–∫–∏
}
```

### 2. –ë–ª–∏–∑–æ—Å—Ç—å –≤–æ –≤—Ä–µ–º–µ–Ω–∏
–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–Ω—å—à–µ –ø–æ—Ä–æ–≥–∞:

```go
deltaTime := newPoint.Time.Sub(existingPoint.Time)
if deltaTime < maxDeltaTime {
   // —Ç–æ—á–∫–∏ –±–ª–∏–∑–∫–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏
}
```

### 3. –í–ª–∏—è–Ω–∏–µ –≤–µ—Å–∞
–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Å –∫–∞–∫ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–æ–≤–µ—Ä–∏—è –∫ —Ç–æ—á–∫–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –≤–µ—Å –≤—ã—Å–æ–∫–∏–π, —Ç–æ—á–∫–∞ "—Å–∏–ª—å–Ω–µ–µ –≤–ª–∏—è–µ—Ç" –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–æ—Å–µ–¥–µ–π.

–ú–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–µ—Å–∞:

```go
thresholdValue = baseThreshold / (newPoint.Weight + existingPoint.Weight + 1e-9)
```

---

## üîÅ –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—É—Å—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å:

- `activeSeries []Series` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–∏–π.
- `newPoints []Point` ‚Äî –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–∞ —Ç–µ–∫—É—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

–ê–ª–≥–æ—Ä–∏—Ç–º:

1. –î–ª—è –∫–∞–∂–¥–æ–π –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏ –∏–∑ `newPoints`:
   - –ü—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ –ø–æ–¥—Ö–æ–¥—è—â—É—é —Å–µ—Ä–∏—é –∏–∑ `activeSeries`, –∫ –∫–æ—Ç–æ—Ä–æ–π –µ—ë –º–æ–∂–Ω–æ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å.
   - –ü–æ–¥—Ö–æ–¥—è—â–∞—è —Å–µ—Ä–∏—è ‚Äî —Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–æ–π**, –±–ª–∏–∑–∫–æ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—é.
   - –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å **–±–ª–∏–∂–∞–π—à—É—é –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—é** —Ç–æ—á–∫—É –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç–æ—á–µ–∫ –≤—Å–µ—Ö —Å–µ—Ä–∏–π.

2. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ–¥—Ö–æ–¥—è—â–∞—è —Å–µ—Ä–∏—è ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ—á–∫—É –≤ –Ω–µ—ë.

3. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é —Å–µ—Ä–∏—é.

4. –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö —Ç–æ—á–µ–∫, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Å–µ—Ä–∏–∏ (`activeSeries`) –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.

---

## üí° –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```go
func updateSeries(activeSeries []Series, newPoints []Point, valueTol, timeTol time.Duration) []Series {
    for _, pt := range newPoints {
        bestMatch := -1
        minScore := math.MaxFloat64

        for i := range activeSeries {
            lastPt := activeSeries[i].Points[len(activeSeries[i].Points)-1]
            dt := pt.Time.Sub(lastPt.Time).Seconds()
            dv := math.Abs(pt.Value - lastPt.Value)

            // –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞: —á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –ª—É—á—à–µ
            score := dv/valueTol.Seconds() + dt/timeTol.Seconds()

            if dt >= 0 && score < minScore {
                minScore = score
                bestMatch = i
            }
        }

        if bestMatch != -1 && minScore < 1.0 { // –ø–æ—Ä–æ–≥ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è
            activeSeries[bestMatch].Points = append(activeSeries[bestMatch].Points, pt)
        } else {
            activeSeries = append(activeSeries, Series{Points: []Point{pt}})
        }
    }
    return activeSeries
}
```

---

## üß™ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–µ—Ä–∏–∏**: –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –ø–æ –≤–µ—Å–∞–º —Ç–æ—á–µ–∫.
2. **–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞**: —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–µ—Ä–∏–∏.
3. **–£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Ä–∏–π**: –µ—Å–ª–∏ –æ–Ω–∏ –¥–∞–≤–Ω–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª–∏—Å—å.
4. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞—Ñ–∞**: —Ç–æ—á–∫–∏ –∫–∞–∫ –≤–µ—Ä—à–∏–Ω—ã, —Å–≤—è–∑–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ ‚Äî –µ—Å–ª–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø–æ—Ä–æ–≥.
5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ KD-tree –∏–ª–∏ R-tree** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö —Ç–æ—á–µ–∫ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—é.

---

## ‚úÖ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```go
series := []Series{}

// –ò—Ç–µ—Ä–∞—Ü–∏—è 1
points1 := []Point{
    {Value: 1.0, Weight: 0.8, Time: time.Now()},
    {Value: 1.1, Weight: 0.7, Time: time.Now().Add(1 * time.Second)},
}
series = updateSeries(series, points1, 0.2*time.Second, 0.2)

// –ò—Ç–µ—Ä–∞—Ü–∏—è 2
points2 := []Point{
    {Value: 1.15, Weight: 0.9, Time: time.Now().Add(2 * time.Second)},
    {Value: 2.0, Weight: 0.6, Time: time.Now().Add(2 * time.Second)},
}
series = updateSeries(series, points2, 0.2*time.Second, 0.2)
```

---

## üìå –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏,
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä–∏–∏,
- –£—á–∏—Ç—ã–≤–∞—Ç—å –≤–µ—Å–∞ —Ç–æ—á–µ–∫ –∏ –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏–∏.

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –∏–ª–∏ –≥—Ä–∞—Ñ–æ–≤).

--- 

–•–æ—á–µ—à—å –ø—Ä–∏–º–µ—Ä —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫?

### USER
–í –ø—Ä–∏–º–µ—Ä–µ –¥–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç –≤–µ—Å–∞. –ó–Ω–∞—á–µ–Ω–∏–µ –≤–µ—Å–∞ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç 0 –¥–æ 1

### ASSISTANT
–•–æ—Ä–æ—à–æ! –î–∞–≤–∞–π –æ–±–Ω–æ–≤–∏–º –ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã **—É—á–∏—Ç—ã–≤–∞—Ç—å –≤–µ—Å–∞ —Ç–æ—á–µ–∫** –≤ –ª–æ–≥–∏–∫–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –í–µ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ `float64` (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ—Ç 0 –¥–æ 1), –∏ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ—Ä–æ–≥–æ–≤ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è.

---

## ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É—á–µ—Ç–∞ –≤–µ—Å–∞

–ú—ã –±—É–¥–µ–º:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—é**.
- –°–Ω–∏–∂–∞—Ç—å –ø–æ—Ä–æ–≥–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è, –µ—Å–ª–∏ **–≤–µ—Å —Ç–æ—á–∫–∏ –≤—ã—Å–æ–∫–∏–π**, —Ç.–∫. —Ç–∞–∫–∞—è —Ç–æ—á–∫–∞ –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –±–æ–ª—å—à–µ–≥–æ –¥–æ–≤–µ—Ä–∏—è.
- –£—á–∏—Ç—ã–≤–∞—Ç—å **—Å—Ä–µ–¥–Ω–∏–π –≤–µ—Å —Å–µ—Ä–∏–∏** –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏.

---

## üß† –§–æ—Ä–º—É–ª—ã

–î–ª—è –Ω–æ–≤–æ–π —Ç–æ—á–∫–∏ `pt` –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–∏ —Å–µ—Ä–∏–∏ `lastPt`:

```go
deltaValue := math.Abs(pt.Value - lastPt.Value)
deltaTime := pt.Time.Sub(lastPt.Time).Seconds()

combinedWeight := pt.Weight + lastPt.Weight + 1e-9 // –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å
score := deltaValue / combinedWeight * valueFactor + deltaTime / combinedWeight * timeFactor
```

–ì–¥–µ `valueFactor` –∏ `timeFactor` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤–∞–∂–Ω–æ—Å—Ç–∏.

---

## üîÅ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥

```go
package main

import (
    "fmt"
    "math"
    "time"
)

type Point struct {
    Value  float64
    Weight float64
    Time   time.Time
}

type Series struct {
    Points []Point
}

// updateSeries –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—ã–µ —Ç–æ—á–∫–∏ –≤ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å–µ—Ä–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–µ
func updateSeries(activeSeries []Series, newPoints []Point, valueFactor, timeFactor float64) []Series {
    for _, pt := range newPoints {
        bestMatch := -1
        minScore := math.MaxFloat64

        for i := range activeSeries {
            lastPt := activeSeries[i].Points[len(activeSeries[i].Points)-1]

            dt := pt.Time.Sub(lastPt.Time).Seconds()
            dv := math.Abs(pt.Value - lastPt.Value)

            combinedWeight := pt.Weight + lastPt.Weight + 1e-9
            score := dv/valueFactor/combinedWeight + dt/timeFactor/combinedWeight

            if dt >= 0 && score < minScore {
                minScore = score
                bestMatch = i
            }
        }

        // –ü–æ—Ä–æ–≥ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è: —á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º —Å—Ç—Ä–æ–∂–µ
        if bestMatch != -1 && minScore < 1.0 {
            activeSeries[bestMatch].Points = append(activeSeries[bestMatch].Points, pt)
        } else {
            activeSeries = append(activeSeries, Series{Points: []Point{pt}})
        }
    }

    return activeSeries
}
```

---

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```go
func main() {
    var series []Series

    // –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –≤–∞–∂–Ω–æ—Å—Ç–∏
    valueFactor := 1.0   // –≤–ª–∏—è–Ω–∏–µ —Ä–∞–∑–Ω–∏—Ü—ã –∑–Ω–∞—á–µ–Ω–∏–π
    timeFactor := 100.0  // –≤–ª–∏—è–Ω–∏–µ —Ä–∞–∑–Ω–∏—Ü—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏

    now := time.Now()

    // –ò—Ç–µ—Ä–∞—Ü–∏—è 1
    points1 := []Point{
        {Value: 100.0, Weight: 2.5, Time: now},
        {Value: 101.0, Weight: 3.0, Time: now.Add(1 * time.Second)},
    }
    series = updateSeries(series, points1, valueFactor, timeFactor)

    // –ò—Ç–µ—Ä–∞—Ü–∏—è 2
    points2 := []Point{
        {Value: 102.0, Weight: 4.0, Time: now.Add(2 * time.Second)},
        {Value: 200.0, Weight: 1.0, Time: now.Add(2 * time.Second)},
    }
    series = updateSeries(series, points2, valueFactor, timeFactor)

    // –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    for i, s := range series {
        fmt.Printf("–°–µ—Ä–∏—è %d:\n", i+1)
        for _, p := range s.Points {
            fmt.Printf("  –ó–Ω–∞—á–µ–Ω–∏–µ: %.2f | –í–µ—Å: %.2f | –í—Ä–µ–º—è: %s\n", p.Value, p.Weight, p.Time.Format("15:04:05"))
        }
    }
}
```

---

## üìå –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- –¢–æ—á–∫–∞ `{Value: 100, Weight: 2.5}` –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–µ—Ä–∏—é.
- –¢–æ—á–∫–∞ `{Value: 101, Weight: 3.0}` –±–ª–∏–∑–∫–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –∏ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –∫ –ø–µ—Ä–≤–æ–π —Å–µ—Ä–∏–∏.
- –¢–æ—á–∫–∞ `{Value: 102, Weight: 4.0}` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç—É –∂–µ –¥–∏–Ω–∞–º–∏–∫—É ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é —Å–µ—Ä–∏—é.
- –¢–æ—á–∫–∞ `{Value: 200, Weight: 1.0}` —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–∞ ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–µ—Ä–∏—è.

–í—ã—Å–æ–∫–∏–π –≤–µ—Å –ø–æ–º–æ–≥–∞–µ—Ç —Ç–æ—á–∫–µ –ª—É—á—à–µ –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Å–æ—Å–µ–¥–µ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∞ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é –∏–ª–∏ –≤—Ä–µ–º–µ–Ω–∏.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- –î–æ–±–∞–≤–∏—Ç—å **–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ—Ä–æ–≥–∏**, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–∏—Å–ø–µ—Ä—Å–∏—è).
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–µ—Ä—Å–∏–π —Å–µ—Ä–∏–∏**, –µ—Å–ª–∏ —Ç–æ—á–∫–∞ –º–æ–∂–µ—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º.
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å **–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å–µ—Ä–∏–π**, –µ—Å–ª–∏ –æ–Ω–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è–º.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å/–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —ç—Ç–∏ —Å–µ—Ä–∏–∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ JSON –∏–ª–∏ –≥—Ä–∞—Ñ–∏–∫), –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Ä–∏–π —Å –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–º—Å—è –≤—Ä–µ–º–µ–Ω–µ–º.

–ù—É–∂–Ω–æ?

### USER
–ö–∞–∫ —Å–ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ—Ä–∏–∏, –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –Ω–∏–º–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º, –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ.

### ASSISTANT
–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –ß—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É **–≥–∏–±–∫–æ–π** –∏ **—Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π**, –Ω—É–∂–Ω–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Ç–∞–∫, —á—Ç–æ–±—ã:

1. –ú–æ–∂–Ω–æ –±—ã–ª–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ **—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ—Ä–∏–π**.
2. –í—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–∞ —ç—Ç–∞–ø–µ **–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**.
3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å **—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–¥–∞.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ "–°—Ç—Ä–∞—Ç–µ–≥–∏—è" (Strategy Pattern)

### üß± –û—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

- **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–±—â—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ —Ç–æ—á–µ–∫ –≤ —Å–µ—Ä–∏–∏.
- **–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**: —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ –ª–æ–≥–∏–∫–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ—Ä–∏–π.
- **–§–∞–±—Ä–∏–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π**: —Å–æ–∑–¥–∞—ë—Ç –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ —Ç–∏–ø—É –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
- **–û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```go
type Point struct {
    Value  float64
    Weight float64
    Time   time.Time
}

type Series struct {
    Points []Point
}
```

---

## üîå –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

```go
type SeriesBuilder interface {
    AddPoints(activeSeries []Series, newPoints []Point) []Series
}
```

---

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

### 1. –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å –ø–æ—Ä–æ–≥–∞–º–∏ –∏ –≤–µ—Å–æ–º

```go
type SimpleSeriesBuilder struct {
    valueFactor float64
    timeFactor  float64
}

func (b *SimpleSeriesBuilder) AddPoints(activeSeries []Series, newPoints []Point) []Series {
    for _, pt := range newPoints {
        bestMatch := -1
        minScore := math.MaxFloat64

        for i := range activeSeries {
            lastPt := activeSeries[i].Points[len(activeSeries[i].Points)-1]
            dt := pt.Time.Sub(lastPt.Time).Seconds()
            dv := math.Abs(pt.Value - lastPt.Value)
            combinedWeight := pt.Weight + lastPt.Weight + 1e-9

            score := dv/b.valueFactor/combinedWeight + dt/b.timeFactor/combinedWeight

            if dt >= 0 && score < minScore {
                minScore = score
                bestMatch = i
            }
        }

        if bestMatch != -1 && minScore < 1.0 {
            activeSeries[bestMatch].Points = append(activeSeries[bestMatch].Points, pt)
        } else {
            activeSeries = append(activeSeries, Series{Points: []Point{pt}})
        }
    }
    return activeSeries
}
```

### 2. –î—Ä—É–≥–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π

```go
type WindowedSeriesBuilder struct {
    maxTimeGap time.Duration
    maxValueDiff float64
}

func (b *WindowedSeriesBuilder) AddPoints(activeSeries []Series, newPoints []Point) []Series {
    for _, pt := range newPoints {
        matched := false
        for i := range activeSeries {
            lastPt := activeSeries[i].Points[len(activeSeries[i].Points)-1]
            if pt.Time.Sub(lastPt.Time) <= b.maxTimeGap && math.Abs(pt.Value-lastPt.Value) < b.maxValueDiff {
                activeSeries[i].Points = append(activeSeries[i].Points, pt)
                matched = true
                break
            }
        }
        if !matched {
            activeSeries = append(activeSeries, Series{Points: []Point{pt}})
        }
    }
    return activeSeries
}
```

---

## üè≠ –§–∞–±—Ä–∏–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

```go
type BuilderType string

const (
    SimpleBuilderType   BuilderType = "simple"
    WindowedBuilderType BuilderType = "windowed"
)

func NewSeriesBuilder(config map[string]interface{}) (SeriesBuilder, error) {
    builderType, ok := config["type"].(string)
    if !ok {
        return nil, fmt.Errorf("–Ω–µ —É–∫–∞–∑–∞–Ω —Ç–∏–ø —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏")
    }

    switch BuilderType(builderType) {
    case SimpleBuilderType:
        return &SimpleSeriesBuilder{
            valueFactor: config["value_factor"].(float64),
            timeFactor:  config["time_factor"].(float64),
        }, nil
    case WindowedBuilderType:
        return &WindowedSeriesBuilder{
            maxTimeGap: time.Duration(config["max_time_gap"].(int)) * time.Second,
            maxValueDiff: config["max_value_diff"].(float64),
        }, nil
    default:
        return nil, fmt.Errorf("–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: %s", builderType)
    }
}
```

---

## üß™ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –≥–ª–∞–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ

```go
func main() {
    // –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    config := map[string]interface{}{
        "type":           "simple",
        "value_factor":   1.0,
        "time_factor":    100.0,
    }

    // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
    builder, err := NewSeriesBuilder(config)
    if err != nil {
        panic(err)
    }

    var series []Series

    now := time.Now()

    // –ò—Ç–µ—Ä–∞—Ü–∏—è 1
    points1 := []Point{
        {Value: 100.0, Weight: 2.5, Time: now},
        {Value: 101.0, Weight: 3.0, Time: now.Add(1 * time.Second)},
    }
    series = builder.AddPoints(series, points1)

    // –ò—Ç–µ—Ä–∞—Ü–∏—è 2
    points2 := []Point{
        {Value: 102.0, Weight: 4.0, Time: now.Add(2 * time.Second)},
        {Value: 200.0, Weight: 1.0, Time: now.Add(2 * time.Second)},
    }
    series = builder.AddPoints(series, points2)

    // –í—ã–≤–æ–¥
    for i, s := range series {
        fmt.Printf("–°–µ—Ä–∏—è %d:\n", i+1)
        for _, p := range s.Points {
            fmt.Printf("  –ó–Ω–∞—á–µ–Ω–∏–µ: %.2f | –í–µ—Å: %.2f | –í—Ä–µ–º—è: %s\n", p.Value, p.Weight, p.Time.Format("15:04:05"))
        }
    }
}
```

---

## üß© –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é?

1. –†–µ–∞–ª–∏–∑—É–π –Ω–æ–≤—ã–π —Ç–∏–ø, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `SeriesBuilder`.
2. –î–æ–±–∞–≤—å –µ–≥–æ –≤ —Ñ–∞–±—Ä–∏–∫—É `NewSeriesBuilder`.
3. –£–∫–∞–∂–∏ –µ–≥–æ —Ç–∏–ø –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–ü—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:

```go
type MLBasedSeriesBuilder struct {
    modelPath string
}

func (b *MLBasedSeriesBuilder) AddPoints(activeSeries []Series, newPoints []Point) []Series {
    // –õ–æ–≥–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
    return activeSeries
}
```

---

## üìÅ –í–æ–∑–º–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/cmd
  main.go
/internal
  /builder
    strategy.go
    simple.go
    windowed.go
    ml_based.go
    factory.go
  /types
    types.go
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å**: –∫–∞–∂–¥–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞.
- **–ì–∏–±–∫–æ—Å—Ç—å**: –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥.
- **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å**: –º–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ—Ç–¥–µ–ª—å–Ω–æ.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å/–∑–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ JSON –∏–ª–∏ YAML, –∏–ª–∏ –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ø–ª–∞–≥–∏–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ Go plugins).

–ù—É–∂–Ω–æ?

### USER
–û—Ç–ª–∏—á–Ω—ã–π –æ—Ç–≤–µ—Ç, —Ç–æ —á—Ç–æ –Ω—É–∂–Ω–æ!

### ASSISTANT
–†–∞–¥, —á—Ç–æ –æ—Ç–≤–µ—Ç –ø—Ä–∏—à—ë–ª—Å—è –≤–ø–æ—Ä—É! üéØ  
–ï—Å–ª–∏ —É —Ç–µ–±—è –ø–æ—è–≤—è—Ç—Å—è –Ω–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Ä–∏–π –≤ –ë–î, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è, –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–∏—è—Ö –∏ —Ç.–¥.) ‚Äî —Å–º–µ–ª–æ —Å–ø—Ä–∞—à–∏–≤–∞–π.

–¢–∞–∫–∂–µ —Ç—ã –º–æ–∂–µ—à—å:
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —ç—Ç–æ—Ç –∫–æ–¥ –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤.
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É REST API –∏–ª–∏ CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Kafka / RabbitMQ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

### üìå –ü–æ–ª–µ–∑–Ω—ã–µ –∏–¥–µ–∏ –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è:

| –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML/JSON** | –ü–æ–¥–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞ |
| **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–∏–π** | –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–µ—Ä–∏–∏ –≤ —Ñ–∞–π–ª –∏–ª–∏ –ë–î |
| **–ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è** | –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ —á–µ—Ä–µ–∑ `gonum/plot` –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ `matplotlib` |
| **–ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Ä–∏–π, —Ç–æ—á–µ–∫, –¥–ª–∏–Ω—É —Å–µ—Ä–∏–π –∏ —Ç.–¥. |
| **–ü–ª–∞–≥–∏–Ω—ã** | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Go plugins –∏–ª–∏ `plugin` –ø–∞–∫–µ—Ç –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π |

---

–ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –∏–∑ —ç—Ç–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏–ª–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é —à–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∞ —Ü–µ–ª–∏–∫–æ–º.

–£–¥–∞—á–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ! üíªüöÄ

### USER
–î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

### ASSISTANT
–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π **—Ä–∞—Å—à–∏—Ä–∏–º –Ω–∞—à—É –ø—Ä–æ–≥—Ä–∞–º–º—É**, —á—Ç–æ–±—ã –æ–Ω–∞ –º–æ–≥–ª–∞ —Å–æ–±–∏—Ä–∞—Ç—å –∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å **–º–µ—Ç—Ä–∏–∫–∏ –ø–æ —Å–µ—Ä–∏—è–º**. –≠—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

---

## üìä –ß—Ç–æ —Ç–∞–∫–æ–µ –º–µ—Ç—Ä–∏–∫–∏?

–ú–µ—Ç—Ä–∏–∫–∏ ‚Äî —ç—Ç–æ —á–∏—Å–ª–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤. –ü—Ä–∏–º–µ—Ä—ã:

- –ß–∏—Å–ª–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Ä–∏–π
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ —Å–µ—Ä–∏–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫)
- –ú–∏–Ω./–º–∞–∫—Å./—Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–π —Å–µ—Ä–∏–∏
- –°–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–µ—Ä–∏–∏
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
- –ü–æ–∫—Ä—ã—Ç–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞

---

## üîß –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫

–ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É `MetricsCollector`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç:
- –ü–æ–ª—É—á–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–∏–π,
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏,
- –í—ã–≤–æ–¥–∏—Ç—å –∏—Ö (–≤ –ª–æ–≥, JSON, Prometheus –∏ —Ç.–¥.).

---

### ‚úÖ 1. –û–ø—Ä–µ–¥–µ–ª–∏–º —Ç–∏–ø—ã –º–µ—Ç—Ä–∏–∫

```go
type SeriesMetrics struct {
    TotalSeries        int       // –û–±—â–µ–µ —á–∏—Å–ª–æ —Å–µ—Ä–∏–π
    TotalPoints        int       // –û–±—â–µ–µ —á–∏—Å–ª–æ —Ç–æ—á–µ–∫ –≤–æ –≤—Å–µ—Ö —Å–µ—Ä–∏—è—Ö
    AvgLength          float64   // –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ —Å–µ—Ä–∏–∏
    MaxLength          int       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–µ—Ä–∏–∏
    MinLength          int       // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–µ—Ä–∏–∏
    AvgValue           float64   // –°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º —Ç–æ—á–∫–∞–º
    MinValue, MaxValue float64   // –ú–∏–Ω/–º–∞–∫—Å –∑–Ω–∞—á–µ–Ω–∏—è
    StartTime, EndTime time.Time // –°–∞–º–∞—è —Ä–∞–Ω–Ω—è—è –∏ –ø–æ–∑–¥–Ω—è—è —Ç–æ—á–∫–∏
}
```

---

### ‚úÖ 2. –†–µ–∞–ª–∏–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫

```go
func CollectMetrics(series []Series) SeriesMetrics {
    var m SeriesMetrics
    m.TotalSeries = len(series)

    if m.TotalSeries == 0 {
        return m
    }

    var totalValuesSum float64
    m.MinValue = math.MaxFloat64
    m.MaxValue = -math.MaxFloat64
    m.StartTime = time.Now().Add(24 * time.Hour) // –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å –º–∏–Ω–∏–º—É–º
    m.EndTime = time.Now().Add(-24 * time.Hour)  // –±—É–¥–µ–º –∏—Å–∫–∞—Ç—å –º–∞–∫—Å–∏–º—É–º

    for _, s := range series {
        length := len(s.Points)
        m.TotalPoints += length
        if length > m.MaxLength {
            m.MaxLength = length
        }
        if length < m.MinLength || m.MinLength == 0 {
            m.MinLength = length
        }

        for _, p := range s.Points {
            totalValuesSum += p.Value
            if p.Value < m.MinValue {
                m.MinValue = p.Value
            }
            if p.Value > m.MaxValue {
                m.MaxValue = p.Value
            }
            if p.Time.Before(m.StartTime) {
                m.StartTime = p.Time
            }
            if p.Time.After(m.EndTime) {
                m.EndTime = p.Time
            }
        }
    }

    if m.TotalPoints > 0 {
        m.AvgValue = totalValuesSum / float64(m.TotalPoints)
    }
    m.AvgLength = float64(m.TotalPoints) / float64(m.TotalSeries)

    return m
}
```

---

### ‚úÖ 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ

```go
func main() {
    config := map[string]interface{}{
        "type":         "simple",
        "value_factor": 1.0,
        "time_factor":  100.0,
    }

    builder, err := NewSeriesBuilder(config)
    if err != nil {
        panic(err)
    }

    var series []Series
    now := time.Now()

    // –ò—Ç–µ—Ä–∞—Ü–∏—è 1
    points1 := []Point{
        {Value: 100.0, Weight: 2.5, Time: now},
        {Value: 101.0, Weight: 3.0, Time: now.Add(1 * time.Second)},
    }
    series = builder.AddPoints(series, points1)

    // –ò—Ç–µ—Ä–∞—Ü–∏—è 2
    points2 := []Point{
        {Value: 102.0, Weight: 4.0, Time: now.Add(2 * time.Second)},
        {Value: 200.0, Weight: 1.0, Time: now.Add(2 * time.Second)},
    }
    series = builder.AddPoints(series, points2)

    // –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
    metrics := CollectMetrics(series)

    // –í—ã–≤–æ–¥ –º–µ—Ç—Ä–∏–∫
    fmt.Printf("–ß–∏—Å–ª–æ —Å–µ—Ä–∏–π: %d\n", metrics.TotalSeries)
    fmt.Printf("–û–±—â–µ–µ —á–∏—Å–ª–æ —Ç–æ—á–µ–∫: %d\n", metrics.TotalPoints)
    fmt.Printf("–°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ —Å–µ—Ä–∏–∏: %.2f\n", metrics.AvgLength)
    fmt.Printf("–ú–∏–Ω/–º–∞–∫—Å –¥–ª–∏–Ω–∞ —Å–µ—Ä–∏–∏: %d / %d\n", metrics.MinLength, metrics.MaxLength)
    fmt.Printf("–°—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: %.2f\n", metrics.AvgValue)
    fmt.Printf("–ú–∏–Ω/–º–∞–∫—Å –∑–Ω–∞—á–µ–Ω–∏–µ: %.2f / %.2f\n", metrics.MinValue, metrics.MaxValue)
    fmt.Printf("–ü–µ—Ä–∏–æ–¥ –¥–∞–Ω–Ω—ã—Ö: —Å %s –¥–æ %s\n", metrics.StartTime.Format(time.RFC3339), metrics.EndTime.Format(time.RFC3339))
}
```

---

## üß© –í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏

| –ú–µ—Ç—Ä–∏–∫–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `Duration` | –û–±—â–∞—è –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ |
| `SeriesGrowthRate` | –°–∫–æ—Ä–æ—Å—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å–µ—Ä–∏–π (—Ç–æ—á–µ–∫ –≤ —Å–µ–∫—É–Ω–¥—É) |
| `AvgWeight` | –°—Ä–µ–¥–Ω–∏–π –≤–µ—Å —Ç–æ—á–µ–∫ |
| `TrendDirection` | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–Ω–¥–∞ –≤ –∫–∞–∂–¥–æ–π —Å–µ—Ä–∏–∏ |
| `SeriesStability` | –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∑–Ω–∞—á–µ–Ω–∏–π –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –¥–∏—Å–ø–µ—Ä—Å–∏—é) |

---

## üìà –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus:

```go
import "github.com/prometheus/client_golang/prometheus"

var (
    seriesCount = prometheus.NewGauge(prometheus.GaugeOpts{
        Name: "series_total",
        Help: "Total number of active series",
    })
    avgSeriesLength = prometheus.NewGauge(prometheus.GaugeOpts{
        Name: "series_avg_length",
        Help: "Average length of series",
    })
)

func init() {
    prometheus.MustRegister(seriesCount, avgSeriesLength)
}

// –≥–¥–µ-—Ç–æ –≤ –∫–æ–¥–µ
metrics := CollectMetrics(series)
seriesCount.Set(float64(metrics.TotalSeries))
avgSeriesLength.Set(metrics.AvgLength)
```

–ò –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:

```go
http.Handle("/metrics", promhttp.Handler())
log.Fatal(http.ListenAndServe(":8080", nil))
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å —Ç—ã –º–æ–∂–µ—à—å:
- –°–æ–±–∏—Ä–∞—Ç—å –≤–∞–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ —Å–µ—Ä–∏—è–º,
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏,
- –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–µ—Ä–∏–π,
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ ‚Äî –º–æ–≥—É –ø–æ–º–æ—á—å:
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –ë–î,
- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—Ä–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏,
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–º–µ–Ω—É —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫.

–ü–∏—à–∏, –∫–æ–≥–¥–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–º–æ—â—å üë®‚Äçüíª

### USER
–û–±—ä—è—Å–Ω–∏ –º–Ω–µ —ç—Ç—É —Å–µ–∫—Ü–∏—é –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ.

```
import "github.com/prometheus/client_golang/prometheus"
```

### ASSISTANT
–ö–æ–Ω–µ—á–Ω–æ! –î–∞–≤–∞–π –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞–∑–±–µ—Ä—ë–º, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–∞ —Å—Ç—Ä–æ–∫–∞:

```go
import "github.com/prometheus/client_golang/prometheus"
```

---

## üß© –ß—Ç–æ —ç—Ç–æ –∑–∞ –∏–º–ø–æ—Ä—Ç?

–≠—Ç–æ **–∏–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Prometheus Client Library –¥–ª—è Go**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é:

- **–û–ø—Ä–µ–¥–µ–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—á—ë—Ç—á–∏–∫–∏, —Ç–∞–π–º–µ—Ä—ã, –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏),
- **–°–æ–±–∏—Ä–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–∏—Ö –º–µ—Ç—Ä–∏–∫**,
- **–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∏—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ, –ø–æ–Ω—è—Ç–Ω–æ–º Prometheus** ‚Äî –ø–æ–ø—É–ª—è—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞.

–¢–æ –µ—Å—Ç—å —Ç—ã –ø–æ–¥–∫–ª—é—á–∞–µ—à—å –≥–æ—Ç–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, —á—Ç–æ–±—ã **–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –∫–æ–¥ —Å Prometheus** –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Å–∞—Ç—å –≤—Å—ë —Å –Ω—É–ª—è.

---

## üîç –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ Prometheus

[Prometheus](https://prometheus.io/) ‚Äî —ç—Ç–æ open-source —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è. –û–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

1. –¢–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏** –ø–æ HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—É `/metrics`.
2. Prometheus **–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç** –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.
3. –°–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —á–µ—Ä–µ–∑ [Grafana](https://grafana.com/), –∏–ª–∏ –ø—Ä—è–º–æ –≤ UI —Å–∞–º–æ–≥–æ Prometheus.

---

## üì¶ –ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç `prometheus` –ø–∞–∫–µ—Ç?

–ü–∞–∫–µ—Ç `github.com/prometheus/client_golang/prometheus` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:

### 1. **–¢–∏–ø—ã –º–µ—Ç—Ä–∏–∫**

- `Counter` ‚Äî —Å—á—ë—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π **—Ç–æ–ª—å–∫–æ —Ä–∞—Å—Ç—ë—Ç** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–∏—Å–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤).
- `Gauge` ‚Äî –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç **–∏–∑–º–µ–Ω—è—Ç—å—Å—è –≤–≤–µ—Ä—Ö –∏ –≤–Ω–∏–∑** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π).
- `Histogram` ‚Äî –∏–∑–º–µ—Ä—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞).
- `Summary` ‚Äî –ø–æ—Ö–æ–∂ –Ω–∞ Histogram, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–≤–∞–Ω—Ç–∏–ª–µ–π.

### 2. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–µ—Ç—Ä–∏–∫ (`Registerer`)**

–ß–µ—Ä–µ–∑ –Ω–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏. Prometheus –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å, –∫–∞–∫ –∏—Ö —Å–æ–±–∏—Ä–∞—Ç—å.

### 3. **HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫**

–ò–∑ –¥—Ä—É–≥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ (`promhttp`) –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/metrics`.

---

## ‚ú® –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–í–æ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:

### 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Ç—Ä–∏–∫—É

```go
var (
    seriesCount = prometheus.NewGauge(prometheus.GaugeOpts{
        Name: "myapp_series_total",
        Help: "The total number of active time series.",
    })
)
```

### 2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –µ—ë

```go
func init() {
    prometheus.MustRegister(seriesCount)
}
```

### 3. –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ –∫–æ–¥–µ

```go
seriesCount.Set(float64(len(series)))
```

### 4. –ó–∞–ø—É—Å–∫–∞–µ–º HTTP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ—Ç—Ä–∏–∫–∞–º

```go
import (
    "net/http"
    "github.com/prometheus/client_golang/prometheus/promhttp"
)

func startMetricsServer() {
    http.Handle("/metrics", promhttp.Handler())
    log.Println("Starting metrics server on :8080")
    log.Fatal(http.ListenAndServe(":8080", nil))
}
```

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ —Ç—ã –æ—Ç–∫—Ä–æ–µ—à—å `http://localhost:8080/metrics`, —É–≤–∏–¥–∏—à—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–µ:

```
# HELP myapp_series_total The total number of active time series.
# TYPE myapp_series_total gauge
myapp_series_total 3
```

---

## üì¶ –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É?

–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É:

```bash
go get github.com/prometheus/client_golang/prometheus
```

Go –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∞–µ—Ç –∏ –¥–æ–±–∞–≤–∏—Ç –µ—ë –≤ `go.mod`.

---

## üéØ –î–ª—è —á–µ–≥–æ —Ç–µ–±–µ —ç—Ç–æ –Ω—É–∂–Ω–æ?

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å:
- –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏,
- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É —Å–µ—Ä–∏–π, —Ç–æ—á–µ–∫, –æ—à–∏–±–æ–∫ –∏ —Ç.–¥.,
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –æ—Ç –Ω–æ—Ä–º—ã,

...—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Prometheus ‚Äî –æ—Ç–ª–∏—á–Ω—ã–π –≤—ã–±–æ—Ä.

---

## üìå –ò—Ç–æ–≥

| –ß–∞—Å—Ç—å –∫–æ–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|
| `import "github.com/prometheus/client_golang/prometheus"` | –ü–æ–¥–∫–ª—é—á–∞–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ |
| `NewGauge`, `NewCounter` –∏ —Ç.–¥. | –°–æ–∑–¥–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã –º–µ—Ç—Ä–∏–∫ |
| `MustRegister()` | –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏, —á—Ç–æ–±—ã Prometheus –º–æ–≥ –∏—Ö —Å–æ–±–∏—Ä–∞—Ç—å |
| `promhttp` | –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ |

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –≤ Grafana, –∏–ª–∏ –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –≤—Ä–µ–º–µ–Ω–∏ –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏).  
–ù—É–∂–Ω–æ?

### USER
–û–±—ä—è—Å–Ω–∏ –º–Ω–µ —ç—Ç—É —Å–µ–∫—Ü–∏—é –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ.

```
–ø—Ä—è–º–æ –≤ UI —Å–∞–º–æ–≥–æ Prometheus
```

### ASSISTANT
–ö–æ–Ω–µ—á–Ω–æ! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —Ñ—Ä–∞–∑—É:

> **"–ø—Ä—è–º–æ –≤ UI —Å–∞–º–æ–≥–æ Prometheus"**

---

## üß© –ß—Ç–æ —Ç–∞–∫–æ–µ "UI —Å–∞–º–æ–≥–æ Prometheus"?

**UI (User Interface)** ‚Äî —ç—Ç–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—ã –º–æ–∂–µ—à—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

–ö–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –æ **"UI —Å–∞–º–æ–≥–æ Prometheus"**, –∏–º–µ—é—Ç –≤ –≤–∏–¥—É **–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º Prometheus. –≠—Ç–æ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–ª–∏ –ø–∞–Ω–µ–ª—å –≤—Ä–æ–¥–µ Grafana ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –Ω–∏–º.

---

## üì∫ –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç UI Prometheus?

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ Prometheus —Ç—ã –º–æ–∂–µ—à—å –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:9090
```

–¢–∞–º —Ç—ã —É–≤–∏–¥–∏—à—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É:

```
Prometheus Time Series Collection & Processing Server

Expression:
[ Execute ]

Graph / Console / Table / JSON / Exemplars / Graph... tabs
```

–≠—Ç–æ –∏ –µ—Å—Ç—å UI Prometheus.

---

## üîç –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ UI Prometheus

1. ### üîé –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ PromQL-–∑–∞–ø—Ä–æ—Å–æ–≤
   Prometheus –∏–º–µ–µ—Ç —Å–≤–æ–π —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äî **PromQL (Prometheus Query Language)**.

   –ù–∞–ø—Ä–∏–º–µ—Ä:
   ```promql
   myapp_series_total
   ```

   –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–∫–∞–∂–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–≤–æ–µ–π –º–µ—Ç—Ä–∏–∫–∏ `myapp_series_total`.

2. ### üìà –ì—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   –í UI –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º.

   –¢—ã –ø—Ä–æ—Å—Ç–æ –ø–∏—à–µ—à—å –∑–∞–ø—Ä–æ—Å ‚Üí –≤—ã–±–∏—Ä–∞–µ—à—å –≤–∫–ª–∞–¥–∫—É "Graph" ‚Üí –∏ –≤–∏–¥–∏—à—å –≥—Ä–∞—Ñ–∏–∫.

3. ### üóÇ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
   –ü–µ—Ä–µ–π–¥–∏ –≤ –º–µ–Ω—é **Status ‚Üí Targets**, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–≤–æ–π —Å–µ—Ä–≤–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∏ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è.

4. ### ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
   –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–µ **Alerts**.

---

## üõ† –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã —Å UI

–î–æ–ø—É—Å—Ç–∏–º, —Ç—ã –¥–æ–±–∞–≤–∏–ª –≤ —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫—É:

```go
var seriesCount = prometheus.NewGauge(prometheus.GaugeOpts{
    Name: "myapp_series_total",
    Help: "Total number of active time series.",
})
```

–ò –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª –µ—ë:

```go
prometheus.MustRegister(seriesCount)
```

### –®–∞–≥–∏ –≤ UI:

1. –ó–∞–ø—É—Å—Ç–∏ —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ `/metrics` –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8080/metrics`.
3. –ù–∞—Å—Ç—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥ Prometheus, —á—Ç–æ–±—ã –æ–Ω —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–ª —ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç.
4. –û—Ç–∫—Ä–æ–π `http://localhost:9090`.
5. –í –ø–æ–ª–µ Expression –≤–≤–µ–¥–∏:
   ```
   myapp_series_total
   ```
6. –ù–∞–∂–º–∏ **Execute**.
7. –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Graph** ‚Äî —É–≤–∏–¥–∏—à—å –≥—Ä–∞—Ñ–∏–∫.

---

## üì¶ –ü–æ—á–µ–º—É —ç—Ç–æ —É–¥–æ–±–Ω–æ?

- **–ù–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** –≤—Ä–æ–¥–µ Grafana.
- **–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å `/metrics`.
- **–ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä** —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –±–µ–∑ –ª–∏—à–Ω–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.
- **–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–µ–±–∞–≥–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**.

---

## üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Grafana

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞       | UI Prometheus             | Grafana                        |
|----------------------|----------------------------|--------------------------------|
| –£—Å—Ç–∞–Ω–æ–≤–∫–∞            | –í—Å—Ç—Ä–æ–µ–Ω–æ –≤ Prometheus      | –ù—É–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å     |
| –ì–∏–±–∫–æ—Å—Ç—å             | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è               | –û—á–µ–Ω—å –≥–∏–±–∫–∞—è                   |
| –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–∞—à–±–æ—Ä–¥–æ–≤  | –ù–µ—Ç                       | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è                 |
| –ê–Ω–∏–º–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤    | –ï—Å—Ç—å                      | –ï—Å—Ç—å                           |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ        | –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | –î–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ |

---

## ‚úÖ –í—ã–≤–æ–¥

–§—Ä–∞–∑–∞ **"–ø—Ä—è–º–æ –≤ UI —Å–∞–º–æ–≥–æ Prometheus"** –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å **–ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏ –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**, –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä—ã–≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Prometheus –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –≠—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å:
- –ö–∞–∫ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞,
- –ö–∞–∫ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –≤ Prometheus UI,
- –ö–∞–∫ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ Grafana.

–ù—É–∂–Ω–æ?

### USER
–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–ø—É—Å–∫ prometheus –≤ docker-compose

### ASSISTANT
–û—Ç–ª–∏—á–Ω–æ! –ù–∞—Å—Ç—Ä–æ–∏–º **Prometheus** —á–µ—Ä–µ–∑ `docker-compose`, —á—Ç–æ–±—ã –æ–Ω –º–æ–≥ —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ —Ç–≤–æ–µ–≥–æ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ —É–¥–æ–±–Ω—ã–π –∏ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞ Prometheus –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –∏–ª–∏ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ.

---

## üß± –ß—Ç–æ –º—ã —Å–¥–µ–ª–∞–µ–º:

1. –°–æ–∑–¥–∞–¥–∏–º `docker-compose.yml` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Prometheus.
2. –ù–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–æ–π –∫–æ–Ω—Ñ–∏–≥ `prometheus.yml`, –≥–¥–µ —É–∫–∞–∂–µ–º, –æ—Ç–∫—É–¥–∞ —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (—Ç–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ).
3. –ó–∞–ø—É—Å—Ç–∏–º –≤—Å—ë —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã `docker-compose up`.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
my-go-app/
‚îú‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ prometheus.yml
```

---

## 1Ô∏è‚É£ –®–∞–≥: `prometheus.yml` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `prometheus.yml` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```yaml
global:
  scrape_interval: 5s

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  - job_name: 'my-go-app'
    static_configs:
      - targets: ['host.docker.internal:8080']
```

> ‚ö†Ô∏è –û–±—ä—è—Å–Ω–µ–Ω–∏–µ:
> - `scrape_interval`: –∫–∞–∫ —á–∞—Å—Ç–æ Prometheus –±—É–¥–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏.
> - `job_name: 'my-go-app'`: –∏–º—è —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.
> - `targets`: –∞–¥—Ä–µ—Å, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `/metrics` —Ç–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (`http://localhost:8080/metrics`).

---

## 2Ô∏è‚É£ –®–∞–≥: `docker-compose.yml`

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `docker-compose.yml`:

```yaml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
```

> üîç –ó–¥–µ—Å—å:
> - –ú—ã –º–æ–Ω—Ç–∏—Ä—É–µ–º –Ω–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π `prometheus.yml` –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
> - –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç `9090`, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ UI Prometheus.

---

## 3Ô∏è‚É£ –®–∞–≥: –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `localhost:8080/metrics`

–¢–≤–æ–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∞–¥—Ä–µ—Å—É:

```
http://localhost:8080/metrics
```

–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ HTTP —Å–µ—Ä–≤–µ—Ä–∞ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏:

```go
import (
    "github.com/prometheus/client_golang/prometheus/promhttp"
    "net/http"
)

func startMetricsServer() {
    http.Handle("/metrics", promhttp.Handler())
    http.ListenAndServe(":8080", nil)
}
```

---

## 4Ô∏è‚É£ –®–∞–≥: –ó–∞–ø—É—Å–∫

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤—ã–ø–æ–ª–Ω–∏:

```bash
docker-compose up
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ:

- Prometheus –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: [http://localhost:9090](http://localhost:9090)
- –¢–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É `8080`.

---

## üîÑ –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–æ–∂–µ –≤ Docker

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, —Ç–æ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å `docker-compose.yml` —Ç–∞–∫:

```yaml
version: '3.8'

services:
  my-go-app:
    build: .
    container_name: my-go-app
    ports:
      - "8080:8080"

  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    depends_on:
      - my-go-app
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
```

–¢–æ–≥–¥–∞ –≤ `prometheus.yml` –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É:

```yaml
- targets: ['my-go-app:8080']
```

–ò –¥–æ–±–∞–≤—å –≤ `Dockerfile` (–µ—Å–ª–∏ –µ–≥–æ –µ—â—ë –Ω–µ—Ç):

```Dockerfile
FROM golang:1.21

WORKDIR /app
COPY . .

EXPOSE 8080
CMD ["go", "run", "main.go"]
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –ü–µ—Ä–µ–π–¥–∏ –≤ –±—Ä–∞—É–∑–µ—Ä: [http://localhost:9090](http://localhost:9090)
2. –í –ø–æ–ª–µ `Expression` –≤–≤–µ–¥–∏ –æ–¥–Ω—É –∏–∑ —Ç–≤–æ–∏—Ö –º–µ—Ç—Ä–∏–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä:
   ```
   myapp_series_total
   ```
3. –ù–∞–∂–º–∏ `Execute`.
4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É `Graph` ‚Äî –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –≥—Ä–∞—Ñ–∏–∫.

---

## üéØ –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Prometheus](https://prometheus.io/docs/introduction/overview/)
- [PromQL ‚Äî —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤ Prometheus](https://prometheus.io/docs/prometheus/latest/querying/basics/)
- [Grafana –¥–ª—è –∫—Ä–∞—Å–∏–≤—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤](https://grafana.com/get)

---

## üí¨ –ù—É–∂–Ω–æ?

–ú–æ–≥—É –ø–æ–º–æ—á—å:
- –î–æ–±–∞–≤–∏—Ç—å Grafana –≤ `docker-compose`.
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä –¥–∞—à–±–æ—Ä–¥–∞.
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ –±–∞–∑—É.
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã.

–ù–∞–ø–∏—à–∏, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –¥–∞–ª—å—à–µ!

### USER
–û–±—ä—è—Å–Ω–∏ –º–Ω–µ —ç—Ç—É —Å–µ–∫—Ü–∏—é –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ.

```
host.docker.internal
```

### ASSISTANT
–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á—Ç–æ —Ç–∞–∫–æ–µ:

```
host.docker.internal
```

---

## üß© –ß—Ç–æ —ç—Ç–æ –∑–∞ –∞–¥—Ä–µ—Å?

`host.docker.internal` ‚Äî —ç—Ç–æ **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ DNS-–∏–º—è**, –∫–æ—Ç–æ—Ä–æ–µ **Docker –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**, —á—Ç–æ–±—ã –æ–Ω–∏ –º–æ–≥–ª–∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ **—Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ** (—Ç.–µ. –∫ —Ç–≤–æ–µ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä—É –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—â–µ–Ω Docker).

---

## üîç –ó–∞—á–µ–º –æ–Ω–æ –Ω—É–∂–Ω–æ?

–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ:

- –û–Ω–æ –Ω–µ –≤–∏–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ.
- –ù–µ –º–æ–∂–µ—Ç –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–∏—Å–∞–º, –∑–∞–ø—É—â–µ–Ω–Ω—ã–º **–ª–æ–∫–∞–ª—å–Ω–æ** –Ω–∞ —Ç–≤–æ—ë–º –ü–ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –Ω–∞ `localhost:8080`), –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø—É—Ç—å.

–í–æ—Ç –∑–¥–µ—Å—å –∏ –ø–æ–º–æ–≥–∞–µ—Ç `host.docker.internal`.

---

## üìå –ü—Ä–∏–º–µ—Ä

–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º:
- –¢—ã –∑–∞–ø—É—Å—Ç–∏–ª —Å–≤–æ—ë Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–≤–Ω–µ Docker**, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Å—Ç–æ —á–µ—Ä–µ–∑ `go run main.go`.
- –û–Ω–æ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç `8080` (`http://localhost:8080/metrics`).
- –¢—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã **Prometheus, –∑–∞–ø—É—â–µ–Ω–Ω—ã–π –≤ Docker**, –º–æ–≥ —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å —ç—Ç–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞.

–¢–æ–≥–¥–∞ –≤ –∫–æ–Ω—Ñ–∏–≥–µ Prometheus (`prometheus.yml`) –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å:

```yaml
scrape_configs:
  - job_name: 'my-go-app'
    static_configs:
      - targets: ['host.docker.internal:8080']
```

–≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç Prometheus (–∑–∞–ø—É—â–µ–Ω–Ω–æ–º—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ):

> "–ó–∞–ø—Ä–æ—Å–∏ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –∞–¥—Ä–µ—Å—É `http://host.docker.internal:8080/metrics`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ–µ–º—É —Ö–æ—Å—Ç—É (–º–æ–µ–≥–æ –ü–ö)".

---

## üñ•Ô∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

- –í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `host.docker.internal` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –≤ **IP-–∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞** (–æ–±—ã—á–Ω–æ `172.17.0.1` –¥–ª—è Linux, –∏–ª–∏ –¥—Ä—É–≥–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP).
- –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ—Ä—Ç—ã, –æ—Ç–∫—Ä—ã—Ç—ã–µ –Ω–∞ —Ç–≤–æ—ë–º –ü–ö.

---

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –û–° | –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ `host.docker.internal`? |
|----|---------------------------------------------|
| **Linux** | ‚úÖ –î–∞, –Ω–∞—á–∏–Ω–∞—è —Å Docker 18.03+ |
| **macOS** | ‚úÖ –î–∞, —á–µ—Ä–µ–∑ Docker Desktop |
| **Windows** | ‚úÖ –î–∞, —á–µ—Ä–µ–∑ Docker Desktop |

> ‚ö†Ô∏è –ù–∞ **—á–∏—Å—Ç–æ–º Linux –±–µ–∑ Docker Desktop** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ubuntu + Docker Engine), `host.docker.internal` **–Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**.  
–ù–æ –º–æ–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É, –ø–µ—Ä–µ–¥–∞–≤ —Ö–æ—Å—Ç —á–µ—Ä–µ–∑ `--add-host=host.docker.internal:host-gateway` –≤ –∫–æ–º–∞–Ω–¥–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

---

## üí° –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–π Docker

–ï—Å–ª–∏ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å **–∏ —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∏ Prometheus –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö**, —Ç–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–æ–±—â—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é —Å–µ—Ç—å Docker**, –∏ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞:

```yaml
# docker-compose.yml
services:
  my-go-app:
    build: .
    container_name: my-go-app
    ports:
      - "8080:8080"

  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    depends_on:
      - my-go-app
```

–ò —Ç–æ–≥–¥–∞ –≤ `prometheus.yml` –±—É–¥–µ—Ç:

```yaml
targets: ['my-go-app:8080']
```

---

## ‚úÖ –ò—Ç–æ–≥

| –í—ã—Ä–∞–∂–µ–Ω–∏–µ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|----------|------------|
| `host.docker.internal` | –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ (—Ç.–µ. –∫ —Ç–≤–æ–µ–º—É –∫–æ–º–ø—å—é—Ç–µ—Ä—É) |
| –ü–æ–ª–µ–∑–Ω–æ, –∫–æ–≥–¥–∞ —á–∞—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ, –∞ —á–∞—Å—Ç—å –≤ Docker |
| –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ IP-–∞–¥—Ä–µ—Å—É —Ö–æ—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| –†–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –Ω–∞ macOS –∏ Windows (Docker Desktop), –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤ –Ω–∞ Linux |

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ `host.docker.internal` –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏–ª–∏ –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –µ–≥–æ –≤—Ä—É—á–Ω—É—é –Ω–∞ Linux.

–ù—É–∂–Ω–æ?

### USER
Error scraping target: Get "http://host.docker.internal:8080/metrics": dial tcp: lookup host.docker.internal on 127.0.0.11:53: no such host

### ASSISTANT
–û—Ç–ª–∏—á–Ω–æ, —Ç—ã —Å—Ç–æ–ª–∫–Ω—É–ª—Å—è —Å —ç—Ç–æ–π –æ—à–∏–±–∫–æ–π:

```
Error scraping target: Get "http://host.docker.internal:8080/metrics": dial tcp: lookup host.docker.internal on 127.0.0.11:53: no such host
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∏–º—è `host.docker.internal`**, –∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å –≤—Å—ë –Ω–∞ **—á–∏—Å—Ç–æ–º Linux** –±–µ–∑ Docker Desktop (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ubuntu + Docker Engine), –≥–¥–µ `host.docker.internal` **–Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**.

---

## üîç –ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

–ù–∞ **Linux**:
- `host.docker.internal` **–Ω–µ —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç macOS –∏ Windows, –≥–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker Desktop.
- –≠—Ç–æ DNS-–∏–º—è –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Docker Desktop –∏–ª–∏ –µ—Å–ª–∏ —Ç—ã —è–≤–Ω–æ –µ–≥–æ –¥–æ–±–∞–≤–∏—à—å.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤—å `host.docker.internal` –≤—Ä—É—á–Ω—É—é

–ï—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É:

---

### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--add-host` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

–î–æ–±–∞–≤—å —Ñ–ª–∞–≥ `--add-host=host.docker.internal:host-gateway` –≤ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

#### –ü—Ä–∏–º–µ—Ä –¥–ª—è `docker-compose.yml`:

```yaml
version: '3.8'

services:
  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    command:
      - '--config.file=/etc/prometheus/prometheus.yml'
    extra_hosts:
      - "host.docker.internal:host-gateway"
```

> ‚ö†Ô∏è –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–æ–∫—É:
> ```yaml
> extra_hosts:
>   - "host.docker.internal:host-gateway"
> ```
> –ò–º–µ–Ω–Ω–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç —Ç—Ä—é–∫ ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ `/etc/hosts` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–¢–µ–ø–µ—Ä—å —Ç–≤–æ–π Prometheus —Å–º–æ–∂–µ—Ç —Ä–∞–∑—Ä–µ—à–∏—Ç—å `host.docker.internal`.

---

### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 2: –£–∫–∞–∑–∞—Ç—å IP —Ö–æ—Å—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é

–í–º–µ—Å—Ç–æ `host.docker.internal` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **IP-–∞–¥—Ä–µ—Å —Ö–æ—Å—Ç–∞**.

#### –®–∞–≥–∏:

1. –ù–∞–π–¥–∏ IP —Ö–æ—Å—Ç–∞ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

   ```bash
   ip route | grep default
   ```

   –¢—ã —É–≤–∏–¥–∏—à—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫—É—é —Å—Ç—Ä–æ–∫—É:

   ```
   default via 172.17.0.1 dev eth0
   ```

   –ó–¥–µ—Å—å `172.17.0.1` ‚Äî —ç—Ç–æ IP —Ö–æ—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ Docker-—Å–µ—Ç–∏.

2. –û–±–Ω–æ–≤–∏ `prometheus.yml`, –∑–∞–º–µ–Ω–∏–≤:

   ```yaml
   targets: ['host.docker.internal:8080']
   ```

   –Ω–∞:

   ```yaml
   targets: ['172.17.0.1:8080']
   ```

   > ‚ö†Ô∏è –≠—Ç–æ—Ç IP –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–µ—Ç–∏. –î–ª—è –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `host-gateway`.

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ `host.docker.internal`?

–ó–∞–ø—É—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä—å, –∫–∞–∫ –æ–Ω –≤–∏–¥–∏—Ç —Ö–æ—Å—Ç:

```bash
docker run --rm -it --add-host=host.docker.internal:host-gateway alpine sh
```

–ü–æ—Ç–æ–º –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏ `nslookup` –∏ –ø—Ä–æ–≤–µ—Ä—å:

```sh
apk add bind-tools
nslookup host.docker.internal
```

–ï—Å–ª–∏ –≤–µ—Ä–Ω—ë—Ç IP ‚Äî –∑–Ω–∞—á–∏—Ç, —Å—Ä–∞–±–æ—Ç–∞–ª–æ.

---

## üìå –°–æ–≤–µ—Ç: –õ—É—á—à–∏–π –ø–æ–¥—Ö–æ–¥

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å **–±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**:

- –ó–∞–ø—É—Å–∫–∞–π —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–æ–∂–µ –≤ Docker —á–µ—Ä–µ–∑ `docker-compose`.
- –ò—Å–ø–æ–ª—å–∑—É–π **–æ–±—â—É—é —Å–µ—Ç—å** –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏.
- –û–±—Ä–∞—â–∞–π—Å—è –∫ —Å–≤–æ–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞.

–ü—Ä–∏–º–µ—Ä:

```yaml
# docker-compose.yml
version: '3.8'

services:
  my-go-app:
    build: .
    ports:
      - "8080"

  prometheus:
    image: prom/prometheus
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    depends_on:
      - my-go-app
```

–ò –≤ `prometheus.yml`:

```yaml
scrape_configs:
  - job_name: 'my-go-app'
    static_configs:
      - targets: ['my-go-app:8080']
```

---

## ‚úÖ –ò—Ç–æ–≥

| –°–ø–æ—Å–æ–± | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| `extra_hosts: - "host.docker.internal:host-gateway"` | ‚úîÔ∏è –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Linux, –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É `host.docker.internal` |
| –£–∫–∞–∑–∞—Ç—å IP —Ö–æ—Å—Ç–∞ –≤—Ä—É—á–Ω—É—é (`172.17.0.1`) | ‚úîÔ∏è –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Å—Ç–æ–≤, –Ω–æ –º–µ–Ω–µ–µ –≥–∏–±–∫–∏–π |
| –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Docker + –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ | ‚úîÔ∏è –°–∞–º—ã–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è production |

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–º–æ—á—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–≤–æ–π `docker-compose.yml` –ø–æ–¥ –ª—é–±–æ–π –∏–∑ —ç—Ç–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.

–ù—É–∂–Ω–æ?

### USER
–∫–∞–∫ –≤—ã–≥—Ä—É–∂–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ prometheus, –±–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –µ–Ω–¥–ø–æ–∏–Ω—Ç–∞

### ASSISTANT
–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –¢—ã —Ö–æ—á–µ—à—å **–≤—ã–≥—Ä—É–∂–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ Prometheus**, **–±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/metrics`**. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–Ω–µ –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ HTTP**, –∞ **Prometheus –Ω–µ –±—É–¥–µ—Ç –∏—Ö —Å–æ–±–∏—Ä–∞—Ç—å –ø–æ pull-–ø—Ä–∏–Ω—Ü–∏–ø—É (–æ–ø—Ä–æ—Å–æ–º)**.

–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è **push-based (–æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –≤—Ä—É—á–Ω—É—é)**, –∏ –æ–Ω —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ‚Äî **Pushgateway** –æ—Ç Prometheus.

---

## üß† –í–∞—Ä–∏–∞–Ω—Ç—ã —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ –≤ Prometheus

| –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|----------|
| **Pull (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)** | Prometheus —Å–∞–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —É —Å–µ—Ä–≤–∏—Å–∞ (`/metrics`) |
| **Push** | –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ Pushgateway, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è Prometheus |

---

## üöß –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ "–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫—É" –≤ Prometheus –Ω–∞–ø—Ä—è–º—É—é?

Prometheus **–Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–∏–µ–º–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ push-–∑–∞–ø—Ä–æ—Å–∞–º**. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –º–æ–¥–µ–ª–∏ **pull**: —Å–∞–º –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –ø–æ `/metrics`.

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–ª–∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞—Ç—á-–∑–∞–¥–∞—á–∏), —Ç–æ —Ç–µ–±–µ –Ω—É–∂–µ–Ω **–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –±—É—Ñ–µ—Ä** ‚Äî –≤–æ—Ç –∑–¥–µ—Å—å –∏ –ø–æ–º–æ–≥–∞–µ—Ç **Pushgateway**.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Pushgateway

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Pushgateway

–ó–∞–ø—É—Å—Ç–∏–º Pushgateway —Å –ø–æ–º–æ—â—å—é Docker:

```yaml
# docker-compose.yml
version: '3.8'

services:
  pushgateway:
    image: prom/pushgateway
    container_name: pushgateway
    ports:
      - "9091:9091"
```

–ó–∞–ø—É—Å–∫:

```bash
docker-compose up -d
```

–¢–µ–ø–µ—Ä—å Pushgateway –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É `9091`.

---

### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –∏–∑ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É `client_golang`, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ Pushgateway:

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
go get github.com/prometheus/client_golang@latest
```

#### –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:

```go
package main

import (
    "fmt"
    "net/http"
    "time"

    "github.com/prometheus/client_golang/prometheus"
    "github.com/prometheus/client_golang/prometheus/push"
)

func main() {
    // –°–æ–∑–¥–∞–µ–º –º–µ—Ç—Ä–∏–∫—É Gauge
    gauge := prometheus.NewGauge(prometheus.GaugeOpts{
        Name: "my_custom_metric",
        Help: "An example metric pushed to Pushgateway",
    })

    // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –µ—ë
    registry := prometheus.NewRegistry()
    registry.MustRegister(gauge)

    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ
    gauge.Set(123.45)

    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Pushgateway
    err := push.New("http://localhost:9091", "my_job").
        Grouping("instance", "my-instance").
        Collector(gauge).
        Do()
    if err != nil {
        panic(err)
    }

    fmt.Println("–ú–µ—Ç—Ä–∏–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ Pushgateway")
}
```

---

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Pushgateway

–î–æ–±–∞–≤—å –≤ `prometheus.yml` –Ω–æ–≤—ã–π `scrape_config`:

```yaml
scrape_configs:
  - job_name: 'pushgateway'
    static_configs:
      - targets: ['localhost:9091']
    honor_labels: true  # –≤–∞–∂–Ω–æ ‚Äî —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ª–µ–π–±–ª—ã –ø—Ä–∏ –ø—É—à–µ
```

–¢–µ–ø–µ—Ä—å Prometheus –±—É–¥–µ—Ç –≤–∏–¥–µ—Ç—å –º–µ—Ç—Ä–∏–∫–∏, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Pushgateway.

---

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –ó–∞–ø—É—Å—Ç–∏ –≤—Å—ë:

   ```bash
   docker-compose up -d
   go run main.go
   ```

2. –û—Ç–∫—Ä–æ–π UI Prometheus: [http://localhost:9090](http://localhost:9090)
3. –í–≤–µ–¥–∏ –∑–∞–ø—Ä–æ—Å:

   ```
   my_custom_metric
   ```

   –î–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `123.45`.

---

## üìå –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pushgateway

- –î–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã—Ö –∑–∞–¥–∞—á (batch jobs), –∫–æ—Ç–æ—Ä—ã–µ –±—ã—Å—Ç—Ä–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è.
- –î–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤, cron-–∑–∞–¥–∞—á, Lambda-—Ñ—É–Ω–∫—Ü–∏–π –∏ —Ç.–ø.
- –ö–æ–≥–¥–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å `/metrics` endpoint.

> ‚ö†Ô∏è **–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pushgateway –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `/metrics` –¥–ª—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

---

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

| –°–ø–æ—Å–æ–± | –ö–æ–≥–¥–∞ –ø–æ–¥—Ö–æ–¥–∏—Ç |
|-------|----------------|
| Pushgateway | –ö—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –Ω–µ—Ç HTTP-–¥–æ—Å—Ç—É–ø–∞ |
| Remote Write | –ë–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø–∏—Å–∏ –º–µ—Ç—Ä–∏–∫ –Ω–∞–ø—Ä—è–º—É—é –≤ –±–∞–∑—É (Prometheus + Thanos + Cortex –∏ –¥—Ä.) |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ + scraping –ª–æ–≥–æ–≤ | –ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∏ –ø–∏—à—É—Ç—Å—è –≤ —Ñ–∞–π–ª—ã –∏–ª–∏ Kafka |

---

## ‚úÖ –í—ã–≤–æ–¥

–ß—Ç–æ–±—ã –≤—ã–≥—Ä—É–∂–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ **–Ω–∞–ø—Ä—è–º—É—é –≤ Prometheus –±–µ–∑ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/metrics`**, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Pushgateway** –∫–∞–∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Å–ª–æ–π –º–µ–∂–¥—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ Prometheus.

–¢—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –º–µ—Ç—Ä–∏–∫–∏ POST-–∑–∞–ø—Ä–æ—Å–æ–º –≤ Pushgateway, –∞ Prometheus —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –æ—Ç—Ç—É–¥–∞ –æ–±—ã—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å:
- –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫.
- –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏.
- –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –≤ cron –∏–ª–∏ background-–ø—Ä–æ—Ü–µ—Å—Å—ã.

–ù—É–∂–Ω–æ?

### USER
Error scraping target: Get "http://localhost:9091/metrics": dial tcp 127.0.0.1:9091: connect: connection refused

### ASSISTANT
–û—Ç–ª–∏—á–Ω–æ, —Ç—ã –ø–æ–ª—É—á–∏–ª –æ—à–∏–±–∫—É:

```
Error scraping target: Get "http://localhost:9091/metrics": dial tcp 127.0.0.1:9091: connect: connection refused
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **Prometheus –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ Pushgateway** –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:9091`, –Ω–æ **–Ω–∏—á–µ–≥–æ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —ç—Ç–æ–º –ø–æ—Ä—Ç—É** ‚Äî —Å–µ—Ä–≤–∏—Å **–Ω–µ –∑–∞–ø—É—â–µ–Ω** –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.

–î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è, –∫–∞–∫ —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

---

## üß∞ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ 1. **Pushgateway –Ω–µ –∑–∞–ø—É—â–µ–Ω**

#### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞:
–í—ã–ø–æ–ª–Ω–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
docker ps | grep pushgateway
```

–ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω.

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
–ó–∞–ø—É—Å—Ç–∏ Pushgateway —á–µ—Ä–µ–∑ Docker –∏–ª–∏ `docker-compose`.

–ü—Ä–∏–º–µ—Ä `docker-compose.yml`:

```yaml
version: '3.8'

services:
  pushgateway:
    image: prom/pushgateway
    container_name: pushgateway
    ports:
      - "9091:9091"
```

–ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏:

```bash
docker-compose up -d
```

–¢–µ–ø–µ—Ä—å Pushgateway –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:9091`.

---

### ‚úÖ 2. **Pushgateway –∑–∞–ø—É—â–µ–Ω, –Ω–æ –Ω–µ —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 9091**

#### üîç –ü—Ä–æ–≤–µ—Ä–∫–∞:
–ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker logs pushgateway
```

–ò–ª–∏ –µ—Å–ª–∏ —Ç—ã –Ω–µ –¥–∞–≤–∞–ª –∏–º—è (`container_name`):

```bash
docker logs <CONTAINER_ID>
```

#### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
–£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π.

–ï—Å–ª–∏ –≤—Å—ë –æ–∫, –ø—Ä–æ–≤–µ—Ä—å, –æ—Ç–∫—Ä—ã—Ç –ª–∏ –ø–æ—Ä—Ç:

```bash
curl http://localhost:9091/metrics
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å –º–µ—Ç—Ä–∏–∫–∏ –∏–ª–∏ —Ö–æ—Ç—è –±—ã –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç ‚Äî Pushgateway —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

### ‚úÖ 3. **Prometheus –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–±–∏—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å `/metrics` —É Pushgateway, –Ω–æ –æ–Ω –µ–≥–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç**

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Pushgateway **–Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç `/metrics`**, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω **–Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏, –∞ —Ö—Ä–∞–Ω–∏—Ç —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –µ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç**.

–ù–æ –≤ —Ç–≤–æ—ë–º —Å–ª—É—á–∞–µ Prometheus –¥–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ `http://localhost:9091/metrics`, —á—Ç–æ –Ω–µ–≤–µ—Ä–Ω–æ.

#### ‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ Prometheus:

```yaml
scrape_configs:
  - job_name: 'pushgateway'
    static_configs:
      - targets: ['localhost:9091']
```

> –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Prometheus –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ `/metrics`, –∏ –µ—Å–ª–∏ —Ç–∞–º –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö ‚Äî –æ—à–∏–±–∫–∞ `connection refused` –∏–ª–∏ `404`.

#### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥:

```yaml
scrape_configs:
  - job_name: 'pushgateway'
    static_configs:
      - targets: ['localhost:9091']
    honor_labels: true
    metrics_path: /metrics
```

> ‚ö†Ô∏è –ù–æ –¥–∞–∂–µ –ø—Ä–∏ —ç—Ç–æ–º, Pushgateway –Ω–µ –∏–º–µ–µ—Ç `/metrics`. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π –ø—É—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

---

### ‚úÖ 4. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Pushgateway**

Pushgateway —Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –ø–æ –ø—É—Ç–∏ `/metrics`, –∞ –ø–æ –ø—É—Ç–∏ `/`, –∏ –∫–∞–∂–¥–∞—è –º–µ—Ç—Ä–∏–∫–∞ —Å–≤—è–∑–∞–Ω–∞ —Å **job** –∏ **grouping key** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `instance`).

#### ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Ç–∞–∫–æ–π –∫–æ–Ω—Ñ–∏–≥:

```yaml
scrape_configs:
  - job_name: 'pushgateway'
    static_configs:
      - targets: ['localhost:9091']
    honor_labels: true
    metrics_path: /
```

> –û–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ `metrics_path: /` ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–æ!

–¢–µ–ø–µ—Ä—å Prometheus –±—É–¥–µ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ —Å –∫–æ—Ä–Ω–µ–≤–æ–≥–æ –ø—É—Ç–∏, –∫–∞–∫ —Ç–æ–≥–æ —Ç—Ä–µ–±—É–µ—Ç Pushgateway.

---

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –®–∞–≥ 1: –ó–∞–ø—É—Å—Ç–∏ Pushgateway

```bash
docker-compose up -d
```

### –®–∞–≥ 2: –û—Ç–ø—Ä–∞–≤—å —Ç–µ—Å—Ç–æ–≤—É—é –º–µ—Ç—Ä–∏–∫—É –∏–∑ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```go
package main

import (
    "github.com/prometheus/client_golang/prometheus"
    "github.com/prometheus/client_golang/prometheus/push"
)

func main() {
    gauge := prometheus.NewGauge(prometheus.GaugeOpts{
        Name: "my_custom_metric",
        Help: "This is a pushed metric",
    })

    registry := prometheus.NewRegistry()
    registry.MustRegister(gauge)
    gauge.Set(42)

    err := push.New("http://localhost:9091", "my_job").
        Grouping("instance", "test-instance").
        Collector(gauge).
        Do()
    if err != nil {
        panic(err)
    }
}
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å Pushgateway

–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:9091/
```

–¢—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å —Å–ø–∏—Å–æ–∫ job'–æ–≤ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫.

–ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏:

```bash
curl http://localhost:9091/
```

–í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
# TYPE my_custom_metric gauge
# HELP my_custom_metric This is a pushed metric
my_custom_metric{instance="test-instance",job="my_job"} 42
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å –≤ Prometheus UI

–û—Ç–∫—Ä–æ–π [http://localhost:9090](http://localhost:9090), –≤–≤–µ–¥–∏:

```
my_custom_metric
```

–ï—Å–ª–∏ –≤—Å—ë –≤–µ—Ä–Ω–æ ‚Äî —Ç—ã —É–≤–∏–¥–∏—à—å –∑–Ω–∞—á–µ–Ω–∏–µ `42`.

---

## üìå –í–∞–∂–Ω–æ

| –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å | –ü–æ—á–µ–º—É |
|------------------|--------|
| –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Pushgateway –∑–∞–ø—É—â–µ–Ω | –ë–µ–∑ –Ω–µ–≥–æ –Ω–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –º–µ—Ç—Ä–∏–∫–∏ |
| –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `metrics_path: /` –≤ Prometheus | Pushgateway —Ö—Ä–∞–Ω–∏—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–µ –Ω–∞ `/metrics` |
| –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `honor_labels: true` | –ß—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –ª–µ–π–±–ª—ã –ø—Ä–∏ –ø—É—à–µ |
| –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pushgateway –≤–º–µ—Å—Ç–æ `/metrics` –¥–ª—è –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ | –≠—Ç–æ –∞–Ω—Ç–∏–ø–∞—Ç—Ç–µ—Ä–Ω |

---

## üéØ –ï—Å–ª–∏ —Ö–æ—á–µ—à—å:

–ú–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å:
- –ö–∞–∫ –æ—á–∏—â–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤ Pushgateway.
- –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.
- –ö–∞–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ.

–ù—É–∂–Ω–æ?